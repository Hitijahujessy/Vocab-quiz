#: import WipeTransition kivy.uix.screenmanager.WipeTransition
<WindowManager>:
    transition: WipeTransition()  # There are lots of different transitions, find them here: https://kivy.org/doc/stable/api-kivy.uix.screenmanager.html
    # Create the different screens
    Menu:
    ExampleWidget:
        id: ew


# Layout for Menu screen
<Menu>:

    # Screen name, used for switching between screens
    name: "first"

    # Set canvas for background color. To use an img, add 'source: '/location'' to Rectangle
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        # Rectangle is the background
        Rectangle:
            pos: self.pos
            size: self.size

    ScrollView:
        pos_hint: {'center_x':.5, 'center_y':.9}
        size_hint: .5, .1
        do_scroll_x: True
        do_scroll_y: False
        canvas.before:
            Color:
                rgba: (0, 0, 0, .25)
            # Rectangle is the background
            RoundedRectangle:
                pos: self.pos
                size: self.size
        GridLayout:
            id: boxlayout
            size_hint_x: None
            size_hint_y: .9
            width: root.width
            cols: 6
            rows: 1
            spacing: 150
            padding: 50, 25, 50 , 25
            ToggleButton:
                id: origin_estonia
                group: 'origins'
                on_press: app.root.ids.ew.origin_language = 'Estonian'; app.root.ids.ew.origin_sound = 'et'; app.root.ids.ew.origin_flag = '120x90/ee.png'
                size_hint: .1, .2
                background_color: 0, 0, 0, 0
                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/ee.png'
            ToggleButton:
                id: origin_dutch
                group: 'origins'
                on_press: app.root.ids.ew.origin_language = 'Dutch'; app.root.ids.ew.origin_sound = 'nl'; app.root.ids.ew.origin_flag = '120x90/nl.png'
                size_hint: .1, .2
                background_color: 0, 0, 0, 0
                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/nl.png'
            ToggleButton:
                id: origin_english
                group: 'origins'
                on_press: app.root.ids.ew.origin_language = 'English'; app.root.ids.ew.origin_sound = 'en'; app.root.ids.ew.origin_flag = '120x90/gb.png'
                size_hint: .1, .2
                background_color: 0, 0, 0, 0
                state: 'down'
                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/gb.png'
            ToggleButton:
                id: origin_german
                group: 'origins'
                on_press: app.root.ids.ew.origin_language = 'German'; app.root.ids.ew.origin_sound = 'de'; app.root.ids.ew.origin_flag = '120x90/de.png'
                size_hint: .1, .2
                background_color: 0, 0, 0, 0
                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/de.png'
            ToggleButton:
                id: origin_spanish
                group: 'origins'
                on_press: app.root.ids.ew.origin_language = 'Spanish'; app.root.ids.ew.origin_sound = 'es'; app.root.ids.ew.origin_flag = '120x90/es.png'
                size_hint: .1, .60
                background_color: 0, 0, 0, 0
                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/es.png'
            ToggleButton:
                id: origin_indonesian
                group: 'origins'
                on_press: app.root.ids.ew.origin_language = 'Indonesian'; app.root.ids.ew.origin_sound = 'id'; app.root.ids.ew.origin_flag = '120x90/id.png'
                size_hint: .1, .60
                background_color: 0, 0, 0, 0
                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/id.png'

    ScrollView:
        pos_hint: {'center_x':.5, 'center_y':.7}
        size_hint: .5, .1
        do_scroll_x: True
        do_scroll_y: False
        canvas.before:
            Color:
                rgba: (0, 0, 0, .25)
            # Rectangle is the background
            RoundedRectangle:
                pos: self.pos
                size: self.size
        GridLayout:
            size_hint_x: None
            size_hint_y: .9
            width: root.width
            cols: 6
            rows: 1
            spacing: 150
            padding: 50, 25, 50 , 25
            ToggleButton:
                id: input_estonia
                group: 'input'
                on_press: app.root.ids.ew.input_language = 'Estonian'; app.root.ids.ew.input_flag = '120x90/ee.png'
                size_hint: .1, .2
                background_color: 0, 0, 0, 0
                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/ee.png'
            ToggleButton:
                id: input_dutch
                group: 'input'
                on_press: app.root.ids.ew.input_language = 'Dutch'; app.root.ids.ew.input_flag = '120x90/nl.png'
                size_hint: .1, .2
                background_color: 0, 0, 0, 0
                state: 'down'
                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/nl.png'
            ToggleButton:
                id: input_english
                group: 'input'
                on_press: app.root.ids.ew.input_language = 'English'; app.root.ids.ew.input_flag = '120x90/gb.png'
                size_hint: .1, .2
                background_color: 0, 0, 0, 0

                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/gb.png'
            ToggleButton:
                id: input_german
                group: 'input'
                on_press: app.root.ids.ew.input_language = 'German'; app.root.ids.ew.input_flag = '120x90/de.png'
                size_hint: .1, .2
                background_color: 0, 0, 0, 0
                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/de.png'
            ToggleButton:
                id: input_spanish
                group: 'input'
                on_press: app.root.ids.ew.input_language = 'Spanish'; app.root.ids.ew.input_flag = '120x90/es.png'
                size_hint: .1, .60
                background_color: 0, 0, 0, 0
                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/es.png'
            ToggleButton:
                id: input_indonesian
                group: 'input'
                on_press: app.root.ids.ew.input_language = 'Indonesian'; app.root.ids.ew.input_flag = '120x90/id.png'
                size_hint: .1, .60
                background_color: 0, 0, 0, 0
                canvas.after:
                    Color:
                        rgba: (1, 1, 1, .25) if self.state=='down' else (1, 1, 1, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: '120x90/id.png'

    # Button to start the game/quiz
    Button:
        # Widget ID
	    id: start_button
        text: "Start"
        font_size: 32
        on_press: app.root.current = "second"  # Code is excecuted when button is released. Can also use 'on_press' or 'on_state'
        size_hint: .4, .1  # Widget size in relation with the percentage of the parent widget's size
        pos_hint: {'center_x':.5, 'center_y':.5}  # Widget size in relation with the percentage of the parent widget's size



# Widget containing game/quiz
<ExampleWidget>:
    id: ExampleWidget
    name: 'second'
    maincolor: ExampleWidget.maincolor
    start_game: start_game
    time: 0
    origin_flag: ExampleWidget.origin_flag
    input_flag: ExampleWidget.input_flag
    # Unrestricted layout type, mainly used with pos_hint and size_hint
    FloatLayout:
        # Set canvas for background color. To use an img, add 'source: '/location'' to Rectangle
        canvas:
            Color:
                rgba: ExampleWidget.maincolor
            Rectangle:
                size: root.size
                pos: root.pos

        Button:
            size: root.size
            background_color: 0, 0, 0, 0
            on_press: ExampleWidget.ColorChange()
        Label:
            id: score
            text: str(round(ExampleWidget.time))
            pos_hint: {'center_x':.5, 'center_y':.725}
            size_hint: 1, 0.1
            bold: True
            font_size: self.width/25
#            canvas.before:
#                Color:
#                    rgba: (1 - ExampleWidget.maincolor[0], 1 - ExampleWidget.maincolor[1], 1 - ExampleWidget.maincolor[2], 1)
#                RoundedRectangle:
#                    size: (score.width/4, score.height)
#                    pos: score.pos


        # Labels are used for displaying text
        Label:
            # Widget ID used for accesing widget from withing the .py file
            id: origin_word
            text: '' # This string will be updated in the .py file
            pos_hint: {'center_x':.5, 'center_y':.55}
            bold: True
            font_size: 72



        TextInput:
            id: input
            size_hint: .6, .15
            pos_hint: {'center_x':.5, 'center_y':.4}
            font_size: 65
            multiline: False
            on_text_validate: ExampleWidget.on_enter()  # Textinput will unfocus on enter, and code will be excecuted
            background_color: 0, 0, 0, 0
            color: (1 - ExampleWidget.maincolor[0], 1 - ExampleWidget.maincolor[1], 1 - ExampleWidget.maincolor[2], 1)
            canvas.after:
                Color:
                    rgba: (1, 1, 1, .5)
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

        # Button for proceeding to next word
        Button:
            id: next
            size_hint: .1, .15
            pos_hint: {'center_x':.75, 'center_y':.4}
            background_color: 0, 0, 0, 0
            font_size: 72
            text: '>'
            bold: True
            disabled: True  # Disabled untill correct answer is given
            on_release: ExampleWidget.next_word()
            canvas.before:
                Color:
                    rgba: (0, 0, 0, 0) if self.disabled==True else (0, .7, 0, .8)
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

        Button:
            # Widget ID used for accesing widget from withing the .py file
            id: start_game
            text: 'Start'
            pos_hint: {'center_x':.39, 'center_y':.95}
            size_hint: .2, .1
            bold: True
            font_size: 56
            background_color: (0, 0, 0, 0)
            on_release:  ExampleWidget.start()
            canvas.before:
                Color:
                    rgba: (1 - ExampleWidget.maincolor[0], 1 - ExampleWidget.maincolor[1], 1 - ExampleWidget.maincolor[2], 1)
                RoundedRectangle:
                    size:self.size
                    pos:self.pos

        Label:
            text: '>'
            bold: True
            pos_hint: {'center_x':.5, 'center_y':.835}
            font_size: 75
            canvas.before:
                Color:
                    rgba: (1, 1, 1, .5)
                RoundedRectangle:
                    size: (self.width/3), (self.height/8)
                    pos: (self.width/3.02), (self.height/1.3)

        Image:
            id: origin_icon
            source: ''#ExampleWidget.origin_flag
            color: 0, 0, 0, 0
            pos_hint: {'center_x':.4, 'center_y':.83}
            size_hint: .075, .2

        Image:
            id: input_icon
            source: ''#'ExampleWidget.input_flag'
            color: 0, 0, 0, 0
            pos_hint: {'center_x':.6, 'center_y':.83}
            size_hint: .075, .2

        Button:
            id: sound_button
            size_hint: .1, .15
            on_release: ExampleWidget.play_sound()
            background_color: 0, 0, 0, 0
            pos_hint: {'center_x':.52, 'center_y':.25}
            disabled: True
            canvas.after:
                Color:
                    rgba: 1, 1, 1, 1
                Rectangle:
                    pos: self.x*1.015, self.y*1.1
                    source: 'sound.png'
            canvas.before:
                Color:
                    rgba: (1 - ExampleWidget.maincolor[0], 1 - ExampleWidget.maincolor[1], 1 - ExampleWidget.maincolor[2], 1) if self.state=='normal' else (1 - ExampleWidget.maincolor[0], 1 - ExampleWidget.maincolor[1], 1 - ExampleWidget.maincolor[2], .5)
                RoundedRectangle:
                    pos: self.pos
                    size: self.width/1.25, self.height/1.25



        Button:
            # Widget ID used for accesing widget from withing the .py file
            id: quit
            text: 'Quit'
            pos_hint: {'center_x':.61, 'center_y':.95}
            size_hint: .2, .1
            bold: True
            font_size: 56
            background_color: (0, 0, 0, 0)
            on_press: app.root.current = "first"
            on_release:  ExampleWidget.reload()
            canvas.before:
                Color:
                    rgba: (1 - ExampleWidget.maincolor[0], 1 - ExampleWidget.maincolor[1], 1 - ExampleWidget.maincolor[2], 1)
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
